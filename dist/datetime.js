!function(e,t,n){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,e.module("datetime",[]),e.module("datetime").constant("datetimePlaceholder",{year:"(year)",yearShort:"(year)",month:"(month)",date:"(date)",day:"(day)",hour:"(hour)",hour12:"(hour12)",minute:"(minute)",second:"(second)",millisecond:"(millisecond)",ampm:"(AM/PM)",week:"(week)"});!function(){function e(e){this.value=e}function t(t){function n(i,a){try{var o=t[i](a),u=o.value;u instanceof e?Promise.resolve(u.value).then(function(e){n("next",e)},function(e){n("throw",e)}):r(o.done?"return":"normal",o.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?n(i.key,i.arg):a=null}var i,a;this._invoke=function(e,t){return new Promise(function(r,o){var u={key:e,arg:t,resolve:r,reject:o,next:null};a?a=a.next=u:(i=a=u,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=t.TextParser,a=n.num2str;e.module("datetime").factory("datetime",["$locale","datetimePlaceholder",function(t,n){function o(e){var t,n=[];for(t=1;t<e.length;t++)n.push(e[t]);return n.push(e[0]),n}function u(t){for(var n,r=[],i=0;n=f.exec(t);)if(n.index>i&&(r.push(e.extend({value:t.substring(i,n.index)},g.string)),i=n.index),n.index==i){if(n[1])r.push(e.extend({value:n[1]},g.string)),r.push(g.sss);else if(n[2])r.push(e.extend({value:n[2].replace("''","'")},g.string));else if("timezone"==g[n[0]].name){var a=w;g[n[0]].colon&&(a=m(a)),r.push(e.extend({value:a},g[n[0]]))}else r.push(g[n[0]]);i=f.lastIndex}return i<t.length&&r.push(e.extend({value:t.substring(i)},g.string)),r}function s(e){var t=new Date(e.getFullYear(),0,1),n=new Date(t.getTime());n.getDay()>4?n.setDate(n.getDate()+(1-n.getDay())+7):n.setDate(n.getDate()+(1-n.getDay()));var r=e.getTime()-n.getTime();return Math.floor(r/6048e5)}function m(e){return":"==e[3]?e:e.substr(0,3)+":"+e.substr(3,2)}function c(e){return":"!=e[3]?e:e.substr(0,3)+e.substr(4,2)}function l(e,t){var n=(60*+(t=c(t)).substr(1,2)+ +t.substr(3,2))*(t[0]+"1");return new Date(e.getTime()+60*(n- -e.getTimezoneOffset())*1e3)}function h(e,t){var n=(60*+(t=c(t)).substr(1,2)+ +t.substr(3,2))*(t[0]+"1");return new Date(e.getTime()+60*(-e.getTimezoneOffset()-n)*1e3)}var d=t.DATETIME_FORMATS,f=/yyyy|yy|y|M{1,4}|dd?|EEEE?|HH?|hh?|mm?|ss?|([.,])sss|a|Z{1,2}|ww|w|'(([^']+|'')*)'/g,g={y:{minLength:1,maxLength:4,max:9999,min:0,name:"year",type:"number"},yy:{minLength:2,maxLength:2,name:"yearShort",type:"number"},yyyy:{minLength:4,maxLength:4,max:9999,min:0,name:"year",type:"number"},MMMM:{name:"month",type:"select",select:d.MONTH},MMM:{name:"month",type:"select",select:d.SHORTMONTH},MM:{minLength:2,maxLength:2,name:"month",type:"number"},M:{minLength:1,maxLength:2,name:"month",type:"number",min:1},dd:{minLength:2,maxLength:2,name:"date",type:"number"},d:{minLength:1,maxLength:2,name:"date",type:"number",min:1},EEEE:{name:"day",type:"select",select:o(d.DAY)},EEE:{name:"day",type:"select",select:o(d.SHORTDAY)},HH:{minLength:2,maxLength:2,name:"hour",type:"number"},H:{minLength:1,maxLength:2,name:"hour",type:"number"},hh:{minLength:2,maxLength:2,name:"hour12",type:"number"},h:{minLength:1,maxLength:2,name:"hour12",type:"number"},mm:{minLength:2,maxLength:2,name:"minute",type:"number"},m:{minLength:1,maxLength:2,name:"minute",type:"number"},ss:{minLength:2,maxLength:2,name:"second",type:"number"},s:{minLength:1,maxLength:2,name:"second",type:"number"},sss:{minLength:3,maxLength:3,name:"millisecond",type:"number"},a:{name:"ampm",type:"select",select:d.AMPMS},ww:{minLength:2,maxLength:2,max:53,name:"week",type:"number"},w:{minLength:1,maxLength:2,max:53,name:"week",type:"number"},Z:{name:"timezone",type:"static"},ZZ:{name:"timezone",type:"static",colon:!0},string:{name:"string",type:"static"}},p={year:{extract:function(e){var t=e.getFullYear()%1e4;return t>=0?t:0},restore:function(e,t){return e.setFullYear(t)},add:function(e,t){return e.setFullYear(e.getFullYear()+t)},prior:7},yearShort:{extract:function(e){var t=e.getFullYear()%100;return t>=0?t:t+100},restore:function(e,t){return e.setFullYear(t)},add:function(e,t){return e.setFullYear(e.getFullYear()+t)},prior:7},month:{extract:function(e){return e.getMonth()+1},restore:function(e,t){e.setMonth(t-1),e.getMonth()==t&&e.setDate(0)},add:function(e,t){t=e.getMonth()+t,e.setMonth(t),e.getMonth()==t+1&&e.setDate(0)},prior:5},date:{extract:function(e){return e.getDate()},restore:function(e,t,n){var r=e.getMonth();if(e.setDate(t),e.getMonth()!=r&&t<=31){var i=n.getNodes("month");i&&i.every(function(e){return e.empty})&&e.setDate(t)}},add:function(e,t,n){this.restore(e,e.getDate()+t,n)},prior:4},day:{extract:function(e){return e.getDay()||7},restore:function(e,t){var n=e.getMonth(),r=t-(e.getDay()||7);e.setDate(e.getDate()+r),e.getMonth()!=n&&(r>0?e.setDate(e.getDate()-7):e.setDate(e.getDate()+7))},add:function(e,t){return e.setDate(e.getDate()+t)},prior:4},hour:{extract:function(e){return e.getHours()},restore:function(e,t){return e.setHours(t)},add:function(e,t){return e.setHours(e.getHours()+t)},prior:2},hour12:{extract:function(e){return e.getHours()%12||12},restore:function(e,t){t%=12,e.getHours()>=12&&(t+=12),e.setHours(t)},add:function(e,t){return e.setHours(e.getHours()+t)},prior:2},ampm:{extract:function(e){return e.getHours()<12?1:2},restore:function(e,t){var n=e.getHours();n<12==t>1&&e.setHours((n+12)%24)},add:function(e,t){return e.setHours(e.getHours()+12*t)},prior:3},minute:{extract:function(e){return e.getMinutes()},restore:function(e,t){return e.setMinutes(t)},add:function(e,t){return e.setMinutes(e.getMinutes()+t)},prior:0},second:{extract:function(e){return e.getSeconds()},restore:function(e,t){return e.setSeconds(t)},add:function(e,t){return e.setSeconds(e.getSeconds()+t)},prior:1},millisecond:{extract:function(e){return e.getMilliseconds()},restore:function(e,t){return e.setMilliseconds(t)},add:function(e,t){return e.setMilliseconds(e.getMilliseconds()+t)},prior:1},week:{extract:s,restore:function(e,t){return e.setDate(e.getDate()+7*(t-s(e)))},add:function(e,t){return e.setDate(e.getDate()+7*t)},prior:6}};for(var y in p)p[y].placeholder=n[y];for(var v=Object.values(g),x=Array.isArray(v),D=0,v=x?v:v[Symbol.iterator]();;){var b;if(x){if(D>=v.length)break;b=v[D++]}else{if((D=v.next()).done)break;b=D.value}var M=b;p[M.name]&&e.extend(M,p[M.name])}var w=function(){var e=-(new Date).getTimezoneOffset(),t=e>=0?"+":"-",n=Math.abs(e),r=Math.floor(n/60),i=n%60;return t+a(r,2,2)+a(i,2,2)}(),T=function(){function e(t){r(this,e),this.tp=t,this.timezone=w,this.timezoneNodes=this.tp.nodes.filter(function(e){return"timezone"==e.token.name})}return e.prototype.parse=function(e){return this.tp.parse(e),this},e.prototype.getText=function(){return this.tp.getText()},e.prototype.setDate=function(e,t){return this.tp.setValue(l(e,this.timezone),t),this},e.prototype.getDate=function(){return h(this.tp.getValue(),this.timezone)},e.prototype.setTimezone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;if(e!=this.timezone){var t=this.getDate();this.timezone=e;for(var n=this.timezoneNodes,r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var a;if(r){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var o=a;o.token.colon?o.token.value=m(e):o.token.value=c(e)}return this.setDate(t,!1)}},e.prototype.isEmpty=function(){return this.tp.isEmpty.apply(this.tp,arguments)},e.prototype.isInit=function(){return this.tp.isInit.apply(this.tp,arguments)},e.prototype.unset=function(){return this.tp.unset(),this},e}();return function(e){var t,n=u(d[e]||e);t=n.some(function(e){return"yearShort"==e.name})?function(e){return function(t){e.apply(this,arguments);var n=t.getFullYear();n<0&&t.setFullYear(n+100)}}:function(e){return function(t){e.apply(this,arguments);var n=t.getFullYear();n<0&&t.setFullYear(0),n>9999&&t.setFullYear(9999)}};for(var r=n,a=Array.isArray(r),o=0,r=a?r:r[Symbol.iterator]();;){var s;if(a){if(o>=r.length)break;s=r[o++]}else{if((o=r.next()).done)break;s=o.value}var m=s;m.add&&(m.add=t(m.add)),m.restore&&(m.restore=t(m.restore))}var c=new i({tokens:n,value:new Date,copyValue:function(e){return new Date(e.getTime())}});return new T(c)}}]);var o=t.InputMask;e.module("datetime").directive("datetime",["datetime","$log","$document",function(t,n,i){var a=function(){function e(t,n){r(this,e),this.el=t,this.doc=n,this.handler={}}return e.prototype.on=function(e,t){if("input"!=e)return this.el.on(e,t)},e.prototype.getSelection=function(){var e=this.el[0];if(this.doc.activeElement==e){var t=e.selectionStart,n=e.selectionEnd;return void 0!=t&&void 0!=n?{start:t,end:n}:this.getSelectionIE()}},e.prototype.getSelectionIE=function(){var e=this.el[0],t=this.doc.selection.createRange().getBookmark(),n=e.createTextRange(),r=n.duplicate();n.moveToBookmark(t),r.setEndPoint("EndToStart",n);var i=r.text.length;return{start:i,end:i+n.text.length}},e.prototype.setSelection=function(e,t){var n=this.el[0];this.doc.activeElement==n&&(n.setSelectionRange?n.setSelectionRange(e,t):this.setSelectionIE(e,t))},e.prototype.setSelectionIE=function(e,t){var n=this.el[0].createTextRange();n.moveStart("character",e),n.collapse(),n.moveEnd("character",t-e),n.select()},e.prototype.val=function(){var e;return(e=this.el).val.apply(e,arguments)},e}();return{restrict:"A",require:"?ngModel",link:function(n,r,u,s){function m(e){e&&!f?(f=!0,g.setTimezone("+0000"),p&&p.setTimezone("+0000")):!e&&f&&(f=!1,g.setTimezone(),p&&p.setTimezone())}function c(t){return!(!s.$isEmpty(t)&&!s.$isEmpty(u.min))||(e.isDate(t)||(t=p.getDate()),t>=new Date(u.min))}function l(t){return!(!s.$isEmpty(t)&&!s.$isEmpty(u.max))||(e.isDate(t)||(t=p.getDate()),t<=new Date(u.max))}function h(e){return s.$validate?s.$validate():(s.$setValidity("min",c(e)),s.$setValidity("max",l(e))),!s.$error.min&&!s.$error.max}function d(t){return!(!e.isDate(t)||p)||!(!e.isString(t)||!p)}if(!s)return!1;u.ngTrim="false";var f,g=t(u.datetime),p=u.datetimeModel&&t(u.datetimeModel),y=new a(r,i[0]),v=new o(y,g.tp,u.datetimeSeparator);v.on("digest",function(e){"NOT_INIT"!=e.code&&s.$setValidity("datetime",!1)}),g.tp.on("change",function(){n.$evalAsync(function(){v.err?s.$setValidity("datetime",!1):(g.isInit()||g.isEmpty()?s.$setValidity("datetime",!0):s.$setValidity("datetime",!1),g.getText()!=s.$viewValue&&s.$setViewValue(g.getText()))})}),e.isDefined(u.datetimeUtc)&&(u.datetimeUtc.length>0?n.$watch(u.datetimeUtc,m):m(!0)),s.$validators&&(s.$validators.min=c,s.$validators.max=l),u.$observe("min",function(){h(g.getDate())}),u.$observe("max",function(){h(g.getDate())}),s.$render=function(){},s.$isEmpty=function(e){return!e||"string"==typeof e&&g.isEmpty(e)},s.$parsers.unshift(function(t){if(e.isUndefined(t)&&(t=g.getText()),!e.isString(t))return t;if(v.digest(null,t),g.isInit()){var n=g.getDate();return s.$validate||h(n)?p?p.setDate(n).getText():new Date(n.getTime()):void 0}}),s.$formatters.push(function(e){return s.$setValidity("datetime",!0),e?d(e)?(p&&(e=p.parse(e).getDate()),s.$validate||h(e),g.setDate(e).getText()):e:(g.unset(),n.$evalAsync(function(){s.$setViewValue(g.getText())}),g.getText())})},priority:100}}])}(angular,customInput,customInput.utils);
